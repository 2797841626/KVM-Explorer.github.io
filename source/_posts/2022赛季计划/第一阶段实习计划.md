---
title: 第一阶段实习计划
toc: true
date: 2021-09-13 12:13:23
tags:
categories: 实习计划
---

## 阶段时长

预计到十月中旬截至，累计一个月的时间。

## 工作介绍

熟悉所有的工作内容，学习关键知识。

- 自瞄开发
  - 目标检测
  - 目标追踪和预测
  - 深度学习
    - 数据集训练
    - 模型研发
- 虚拟战斗环境
  - 地图
  - 模型
  - 比赛机制
  - 联机
- 雷达站
  - 三维重建和小地图
  - 目标检测和识别
  - 扩展性研究
- 调试工具开发
  - 可视化实时识别图像
  - 参数分析
  - 参数重载

## 基本学习内容

1. 熟悉git工具——kraken
2. 熟悉标注工具——labelme
3. 掌握基本的cmakelist语法能够编写具有文件结构的编译链
4. C++ 强枚举类型
5. C++ 访问权限
6. 统一的命名风格包括形式和内容
7. 掌握开发模型——增量模型
8. 操作系统中线程、锁、原子操作
9. 学习基本linux命令
10. 掌握相机产见参数及其特性

## 配置基本环境

1. Cuda
2. Cudnn
3. tbb
4. boost
5. 编译安装OpenCV
6. 大恒图像驱动
7. 海康相机驱动
8. 海康相机
## 具体实习内容

1. git实现相机模块
2. git实现通信模块
3. git实现控制模块（优化设计未来可替换成其他语言）
4. 联合电控通过触发线触发测试通信延迟
5. 研究模型
6. 定期代码审查评估
7. 以设计定义文档为驱动的开发流程

## 中秋集训研究内容
针对部分需要代码实现的内容不做模块化要求
1. 扩展卡尔曼滤波——刘俊德
1.1 简介
扩展卡尔曼滤波（Extended Kalman Filter，EKF）是标准卡尔曼滤波在非线性情形下的一种扩展形式，它是一种高效率的递归滤波器（自回归滤波器）。
EKF的基本思想是利用泰勒级数展开将非线性系统线性化，然后采用卡尔曼滤波框架对信号进行滤波，因此它是一种次优滤波
1.2 算法介绍
1.2.1 泰勒级数展开泰勒级数展开是将一个在x=x_{0}处具有n阶导数的函数f(x)，利用关于(x-x_{0})的n次多项式逼近函数值的方法。

若函数f(x)在包含x_{0}的某个闭区间[a,b]上具有n阶导数，且在开区间(a,b)上具有(n+1)阶导数，则对闭区间[a,b]上的任意一点x，都有：

f(x)=\frac{f({​{x}_{0}})}{0!}+\frac{f'({​{x}_{0}})}{1!}(x-{​{x}_{0}})+...+\frac{​{​{f}^{(n)}}({​{x}_{0}})}{n!}{​{(x-{​{x}_{0}})}^{n}}+{​{R}_{n}}(x)

其中{​{f}^{(n)}}({​{x}_{0}})表示函数f(x)在x=x_{0}处的n阶导数，等式右边成为泰勒展开式，剩余的{​{R}_{n}}(x)是泰勒展开式的余项，是(x-x_{0})^{n}的高阶无穷小。

（著名的欧拉公式{​{e}^{ix}}=\cos x +i\sin x就是利用{​{e}^{ix}}，\cos x和\sin x的泰勒展开式得来的！）

当变量是多维向量时，一维的泰勒展开就需要做拓展，具体形式如下：

f(\mathbf{x})=f({​{\mathbf{x}}_{k}})+{​{[\nabla f({​{\mathbf{x}}_{k}})]}^{T}}(\mathbf{x}-{​{\mathbf{x}}_{k}})+{​{o}^{n}}

其中，{​{[\nabla f({​{\mathbf{x}}_{k}})]}^{T}}={​{\mathbf{J}}({\bf x}_k)}表示雅克比矩阵，{​{\mathbf{o}}^{n}}表示高阶无穷小。

{[\nabla f({​{\bf{x}}})]^T} = {​{\bf{J}}({\bf x})} = \begin{bmatrix} \frac{\partial f({\bf x})_1}{\partial {\bf x}_1} & \hdots & \frac{\partial f({\bf x})_1}{\partial {\bf x}_n}\\ \vdots & \ddots & \vdots \\ \frac{\partial f({\bf x})_m}{\partial {\bf x}_1} & \hdots & \frac{\partial f({\bf x})_m}{\partial {\bf x}_n} \end{bmatrix}

这里，f({​{\bf{x}}_k})为m维，{​{\bf{x}}_k}状态向量为n维，\frac{​{​{\partial ^2}f({​{\bf{x}}_k})}}{​{\partial {x_m}\partial {x_n}}} = \frac{​{\partial f({​{\bf{x}}_k})^T}}{​{\partial {x_m}}}\frac{​{\partial f({​{\bf{x}}_k})}}{​{\partial {x_n}}}。

一般来说，EKF在对非线性函数做泰勒展开时，只取到一阶导和二阶导，而由于二阶导的计算复杂性，更多的实际应用只取到一阶导，同样也能有较好的结果。取一阶导时，状态转移方程和观测方程就近似为线性方程，高斯分布的变量经过线性变换之后仍然是高斯分布，这样就能够延用标准卡尔曼滤波的框架。
1.2.2 EKF
标准卡尔曼滤波KF的状态转移方程和观测方程为

{​{\mathbf{\theta }}_{k}}=\mathbf{A}{​{\mathbf{\theta }}_{k-1}}+\mathbf{B}{​{\mathbf{u}}_{k-1}}+{​{\mathbf{s}}_{k}}

{​{\mathbf{z}}_{k}}=\mathbf{C}{​{\mathbf{\theta }}_{k}}+{​{\mathbf{v}}_{k}}

扩展卡尔曼滤波EKF的状态转移方程和观测方程为

{​{\mathbf{\theta }}_{k}}=f({​{\mathbf{\theta }}_{k-1}})+{​{\mathbf{s}}_{k}}          （1）

{​{\mathbf{z}}_{k}}=h({​{\mathbf{\theta }}_{k}})+{​{\mathbf{v}}_{k}}             （2）

利用泰勒展开式对（1）式在上一次的估计值\left\langle {​{\mathbf{\theta }}_{k-1}} \right\rangle处展开得

{​{\mathbf{\theta }}_{k}}=f({​{\mathbf{\theta }}_{k-1}})+{​{\mathbf{s}}_{k}}=f(\left\langle {​{\mathbf{\theta }}_{k-1}} \right\rangle )+{​{\mathbf{F}}_{k-1}}\left( {​{\mathbf{\theta }}_{k-1}}-\left\langle {​{\mathbf{\theta }}_{k-1}} \right\rangle \right)+{​{\mathbf{s}}_{k}}          （3）

再利用泰勒展开式对（2）式在本轮的状态预测值\mathbf{\theta }_{k}^{'}处展开得

{​{\mathbf{z}}_{k}}=h({​{\mathbf{\theta }}_{k}})+{​{\mathbf{v}}_{k}}=h\left( \mathbf{\theta }_{​{k}}^{\mathbf{'}} \right)+{​{\mathbf{H}}_{k}}\left( {​{\mathbf{\theta }}_{k}}-\mathbf{\theta }_{​{k}}^{\mathbf{'}} \right)+{​{\mathbf{v}}_{k}}            （4）

其中，{\mathbf{F}}_{k-1}和{\mathbf{H}}_{k}分别表示函数f(\mathbf{\theta })和h(\mathbf{\theta })在\left\langle {​{\mathbf{\theta }}_{k-1}} \right\rangle和\mathbf{\theta }_{k}^{'}处的雅克比矩阵。

（注：这里对泰勒展开式只保留到一阶导，二阶导数以上的都舍去，噪声假设均为加性高斯噪声）

基于以上的公式，给出EKF的预测（Predict）和更新（Update）两个步骤：

Propagation：

\mathbf{\theta }_{k}^{'}=f(\left\langle {​{\mathbf{\theta }}_{k-1}} \right\rangle)

\mathbf{\Sigma }_{k}^{'}=\mathbf{F}_{k-1}{​{\mathbf{\Sigma }}_{k-1}}{​{\mathbf{F}}_{k-1}^{T}}+\mathbf{Q}

Update：

\mathbf{S}_{k}^{'}={​{\left( \mathbf{H_{k}\Sigma }_{k}^{'}{​{\mathbf{H}}_{k}^{T}}+\mathbf{R} \right)}^{-1}}

\mathbf{K}_{k}^{'}=\mathbf{\Sigma }_{k}^{'}{​{\mathbf{H}}_{k}^{T}}\mathbf{S}_{k}^{'}

\left\langle {​{\mathbf{\theta }}_{k}} \right\rangle =\mathbf{\theta }_{k}^{'}+\mathbf{K}_{k}^{'}\left( {​{\mathbf{z}}_{k}}-{h(\theta }_{k}^{'}) \right)

{​{\mathbf{\Sigma }}_{k}}=\left( \mathbf{I}-\mathbf{K}_{k}^{'}\mathbf{H}_{k} \right)\mathbf{\Sigma }_{k}^{'}

其中的雅克比矩阵{\mathbf{F}}_{k-1}和{\mathbf{H}}_{k}分别为

{​{\mathbf{F}}_{k-1}}={​{\left. \frac{\partial f}{\partial \mathbf{\theta }} \right|}_{\left\langle {​{\mathbf{\theta }}_{k-1}} \right\rangle }}，{​{\mathbf{H}}_{k}}={​{\left. \frac{\partial h}{\partial \mathbf{\theta }} \right|}_{\mathbf{\theta }_{k}^{'}}}

1.3 总结
EKF滤波通过泰勒展开公式，把非线性方程在局部线性化，使得高斯分布的变量在经过线性变换后仍然为高斯分布，这使得能继续把标准卡尔曼滤波KF的框架拿过来用，总体来说，EKF在函数的非线性不是很剧烈的情形下，能够具有很不错的滤波效果。但是EKF也有它的不足之处：其一，它必须求解非线性函数的Jacobi矩阵，对于模型复杂的系统，它比较复杂而且容易出错；其二，引入了线性化误差，对非线性强的系统，容易导致滤波结果下降。基于以上原因，为了提高滤波精度和效率，以满足特殊问题的需要，就必须寻找新的逼近方法，于是便有了粒子滤波PF和无迹卡尔曼滤波UKF，笔者将在接下来的博文中为读者解读。

## 参考资料

> - []()
> - []()


